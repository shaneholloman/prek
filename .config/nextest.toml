[profile.ci-core]
# Exclude language-specific integration tests from the main CI runs (except unimplemented/unsupported/script/fail/pygrep).
default-filter = "not binary_id(prek::languages) or (binary_id(prek::languages) and (test(unimplemented::) or test(unsupported::) or test(script::) or test(fail::) or test(pygrep::)))"
status-level = "skip"
final-status-level = "slow"
failure-output = "immediate"
fail-fast = false
test-threads = 8

[profile.lang-bun]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(bun::)"

[profile.lang-docker]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and (test(docker::) or test(docker_image::))"

[profile.lang-golang]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(golang::)"

[profile.lang-haskell]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(haskell::)"

[profile.lang-julia]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(julia::)"

[test-groups]
serial = { max-threads = 1 }

[profile.lang-lua]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(lua::)"

[[profile.lang-lua.overrides]]
# Run Lua language tests sequentially on Windows.
platform = "cfg(windows)"
test-group = "serial"

[profile.lang-node]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(node::)"

[profile.lang-python]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(python::)"

[profile.lang-ruby]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(ruby::)"

[profile.lang-rust]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(rust::)"

[profile.lang-swift]
inherits = "ci-core"
default-filter = "binary_id(prek::languages) and test(swift::)"
